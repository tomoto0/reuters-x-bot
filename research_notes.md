
## 参考レポジトリ `tomoto0/quote-image-bot` 調査結果

### 概要
AIが生成する名言を画像と組み合わせてXに自動投稿するWebアプリケーション。

### 主要技術スタック
*   **Frontend**: React + Vite, Tailwind CSS + shadcn/ui
*   **AI**: Google Gemini-2.5-flash (名言生成)
*   **画像API**: Unsplash API (背景画像)
*   **自動化**: GitHub Actions

### アプリケーションの機能
1.  AI名言生成 (Gemini-2.5-flashを使用)
2.  背景画像と名言を組み合わせた画像合成
3.  生成された画像のダウンロード
4.  GitHub Actionsによる定期的なXへの自動投稿

### ユーザー要件との比較と変更点
1.  **ニュース取得**: 参考レポジトリにはニュース取得機能がないため、ロイターニュースを取得する機能を新規実装する必要がある。
2.  **分析・コメント生成**: Gemini APIを使用して、取得したニュースから専門家向けの分析・コメントを生成するロジックを実装する。参考レポジトリの名言生成部分を応用可能。
3.  **画像生成**: 参考レポジトリではUnsplash APIを使用しているが、ユーザー要件では「無料のGemini APIの静止画生成」を使用する。この部分の変更が必要。
4.  **X投稿**: 投稿本文が全角140文字以内、ニュースリンクを含める、という要件に合わせて投稿ロジックを調整する。参考レポジトリのX投稿機能は利用可能。
5.  **GitHub Actions**: 毎日午後5時半に実行されるようにスケジュールを設定する。`actions/upload-artifact: v3` の非推奨エラー対策も必要。
6.  **環境変数**: Gemini API KeyとX API KeysはGitHub Repository secretsに設定し、環境変数として利用する。

### 今後のフェーズでの作業方針
*   参考レポジトリのGitHub Actionsのワークフロー、X投稿ロジック、Gemini APIの利用方法を参考にしつつ、ニュース取得と画像生成部分を大きく変更する。
*   フロントエンド部分は今回の要件では不要なため、バックエンドのスクリプトとして再構築する。




### NewsData.io APIの追加情報
- `NewsDataApiClient`の初期化には`apikey`パラメータを使用する。
- `news_api()`メソッドは非推奨であり、代わりに`latest_api()`を使用すべきである。
- 無料プランでは`domain`パラメータによるフィルタリングが制限されている可能性がある。`Unauthorized`エラーはAPIキーが無効であるか、または無料プランの制限によるものである可能性が高い。
- ドキュメントの「Authentication」セクションによると、APIキーが無効な場合、`403 Unauthorized`エラーが返される。

**次のステップ**: `latest_api()`を使用し、`domain`パラメータなしでニュースを取得できるか試す。これにより、APIキーが実際に無効なのか、`domain`パラメータの使用が制限されているのかを切り分ける。


## The New York Times Article Search API

**概要:**
キーワードで記事を検索できるAPI。フィルターを使用して検索を絞り込むことが可能。

**APIエンドポイント:**
`https://api.nytimes.com/svc/search/v2/articlesearch.json`

**認証:**
APIキーが必要。`api-key=yourkey` の形式でクエリパラメータとして渡す。

**利用可能なデータ:**
*   記事のタイトル、著者、公開日、リンク、ドメインURL、説明、コンテンツなど。
*   `multimedia`配列は、`default`と`thumbnail`の2つのクロップのみを含むように簡素化されている。

**無料利用枠:**
*   明確な無料利用枠の記載はないが、APIキーは無料で取得可能。
*   1度に最大10件の結果を返す。`page`パラメータでページネーション可能（最大100ページ、1,000件の結果）。

**制限事項:**
*   `facet`, `facet_fields`, `facet_filter`, `fl` クエリパラメータはサポートされなくなった。
*   フルテキストは利用できない可能性がある（検索結果のSnippetから判断）。

**次のステップ:**
1.  The New York Times Developer PortalでAPIキーを取得する。
2.  取得したAPIキーを使用して、`Article Search API`を呼び出し、ニュースを取得するPythonコードを実装する。
3.  取得したニュースの構造を確認し、必要な情報を抽出するロジックを実装する。

